<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejador Escolar São Sebastião</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="main-wrapper">
        <div id="content-box">

            <div id="q1" class="question-box active">
                <h1>Encontre a escola mais perto - São Sebastião DF</h1>
                <p class="intro">
                    Este sistema (protótipo) visa encontrar a escola mais perto para sua família, 
                    baseado na distância real (via pública) calculada a partir do seu CEP.
                </p>
                <h2>Quantas crianças estudarão?</h2>
                <input type="number" id="inputQtd" min="1" max="5" value="1">
                <br>
                <button class="btn-nav btn-next" onclick="startFlow()">Iniciar</button>
            </div>

            <div id="tpl-tipo" class="question-box">
                <h1>Criança <span class="lbl-num">1</span></h1>
                <h2>Preferência de Escola:</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="saveConfig('tipo', 'publica')">Pública</div>
                 <!--   <div class="option-card" onclick="saveConfig('tipo', 'particular')">Particular</div> -->
                     <div class="option-card disabled">Particular (Indisponível no sistema)</div>
                    <div class="option-card" onclick="saveConfig('tipo', 'ambos')">Sem diferenciação</div>
                </div>
                <button class="btn-nav btn-back" onclick="goBack()">Voltar</button>
            </div>

<div id="tpl-nivel" class="question-box">
                <h1>Criança <span class="lbl-num">1</span></h1>
                <h2>Nível de Ensino:</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="saveConfig('nivel', 'infantil')">Infantil (0-5 anos)</div>
                    <div class="option-card" onclick="saveConfig('nivel', 'fundamental')">Fundamental (6-14 anos)</div>
                    <div class="option-card" onclick="saveConfig('nivel', 'medio')">Médio (15-17 anos)</div>
                </div>
                <button class="btn-nav btn-back" onclick="goBack()">Voltar</button>
            </div>

            <div id="tpl-transporte" class="question-box">
                <h1>Criança <span class="lbl-num">1</span></h1>
                <h2>Meio de Transporte Principal:</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="saveConfig('transporte', 'car')">Carro</div>
                    <div class="option-card" onclick="saveConfig('transporte', 'foot')">A pé</div>
                    <div class="option-card disabled">Ônibus (Indisponível no sistema)</div>
                    <div class="option-card disabled">Escolar (Indisponível no sistema)</div>
                </div>
                <button class="btn-nav btn-back" onclick="goBack()">Voltar</button>
            </div>

            <div id="q-cep" class="question-box">
                <h1>Localização</h1>
                <h2>Digite o CEP da residência:</h2>
                <input type="text" id="inputCep" placeholder="Ex: 71691100" maxlength="9">
                <br>
                <div id="div-mesma-escola" style="margin-top:20px; display:none;">
                    <label style="cursor:pointer; color:#4a5568;">
                        <input type="checkbox" id="checkMesma"> Tentar mesma escola para todos?
                    </label>
                </div>
                <br>
                <button class="btn-nav btn-back" onclick="goBack()">Voltar</button>
                <button class="btn-nav btn-next" onclick="finalizar()">Ver Resultado</button>
                <p id="loading-msg" style="display:none; color:#3182ce; margin-top:15px;">Consultando base de dados...</p>
            </div>

        </div>
    </div>

    <div id="result-screen">
        <div class="result-header">
            <h1>Resultado da Análise</h1>
            <p style="color:#718096">Baseado nas rotas reais de São Sebastião</p>
        </div>
        <div id="results-container"></div>
        <div id="mapa"></div>
        <div style="height: 50px;"></div> <br>
        <button class="btn-nav btn-next" style="width:100%; max-width:300px; display:block; margin:0 auto;" onclick="location.reload()">Nova Consulta</button>
    </div>

    <div class="footer-fixed">
        Protótipo v7.1 • Thomas J. Schrage e Rúbia Rúbio Schrage<br>
        APIs: Nominatim (Geocoding) & OSRM (Routing).
    </div>

<script src="script.js"></script>

</body>
</html>
